#!/usr/bin/bash

# Define the target directory
TARGET_DIR="/tmp/images/screenshots"

# Ensure the directory exists
mkdir -p "$TARGET_DIR"

# Generate a filename with timestamp
FILENAME="$TARGET_DIR/screenshot_$(date +'%Y%m%d_%H%M%S').png"

# Save the screenshot (full output) and copy to clipboard
# Using 'copysave' with 'output' (screen) 
grimblast copysave output "$FILENAME"

# Check if it worked and notify
if [ -f "$FILENAME" ]; then
    notify-send "Screenshot Saved" "Saved to $FILENAME" -i "$FILENAME"
else
    notify-send "Screenshot Failed" "Could not save screenshot" -u critical
fi
